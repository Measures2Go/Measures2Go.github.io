<!doctype html>
<html>
<head>
    <title>Timed Up and Go</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.3/jquery.mobile-1.4.3.min.css">
	<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.4.3/jquery.mobile-1.4.3.min.js"></script>
	<style>
		h1 { margin-top: 2em; }
		.question-section { margin-bottom: 1em; }
	</style>
	
	<script>
		var data = 
		[
		
			// Item 1
			{
				title: 'SITTING TO STANDING',
				instructions: 'Please stand up. Try not to use your hand for support.',
				options:
				[
					'(4) able to stand without using hands and stabilize independently',
					'(3) able to stand independently using hands',
					'(2) able to stand using hands after several tries',
					'(1) needs minimal aid to stand or to stabilize',
					'(0) needs moderate or maximal assist to stand'
				]
			},
			
			// Item 2
			{
				title: 'STANDING UNSUPPORTED',
				instructions: 'Please stand for two minutes without holding on.',
				options:
				[
					'(4) able to stand safely for 2 minutes',
					'(3) able to stand 2 minutes with supervision',
					'(2) able to stand 30 seconds unsupported',
					'(1) needs several tries to stand 30 seconds unsupported',
					'(0) unable to stand 30 seconds unsupported'
				]
			},

			},

			// Item 14
			{
				title: 'STANDING ON ONE LEG',
				instructions: 'Stand on one leg as long as you can without holding on',
				options:
				[
					'(4) able to lift leg independently and hold > 10 seconds',
					'(3) able to lift leg independently and hold 5-10 seconds',
					'(2) able to lift leg independently and hold = 3 seconds',
					'(1) tries to lift leg unable to hold 3 seconds but remains standing independently.',
					'(0) unable to try of needs assist to prevent fall'
				]
			},
		];
		
		$(function() {
			data.forEach(function(entry, entryIndex) {
				var d = '<div class="ui-corner-all question-section"><div class="ui-bar ui-bar-a"><h3>' + (entryIndex + 1) + ': ' + entry.title + '</h3></div>' +
					    '<div class="ui-body ui-body-a"><fieldset data-role="controlgroup"><legend><h4>INSTRUCTIONS: ' + entry.instructions + '</h4></legend>';
				entry.options.forEach(function(option, optionIndex) {
					var optionVal = (entry.options.length - 1 - optionIndex);
					d += '<input type="radio" name="radio-choice-v-' + entryIndex + '" id="radio-choice-v-' + entryIndex + '' + optionIndex + '" value="' + optionVal + '">' +
						 '<label for="radio-choice-v-' + entryIndex + '' + optionIndex + '">' + option + '</label>';
				});
			
				d += '</fieldset></div></div>';
			
				$('#form').append(d).trigger('create');
			});
			
			$('input:radio').change(function() {
				var val = 0;
				$('input:radio:checked').each(function(i, el) {
					val += parseInt($(el).val(), 10);
				});
				
				if (val > 40)
					$('#summary').text(val + ': Patient is at a low fall risk (41-56)');
				else if (val > 20)
					$('#summary').text(val + ': Patient is at a medium fall risk (21-40)');
				else if (val <21)
					$('#summary').text(val + ': Patient is at a high fall risk (0-20)');
			});
		});
	
	</script>
</head>
<body>
    <div data-role="page">
 
        <div data-role="header">
            <h1>Question</h1>
        </div><!-- /header -->
 
        <div data-role="content">
			<form>
				<div id="form"></div>

				<div class="ui-corner-all">
				  <div class="ui-bar ui-bar-a">
					<h3>Summary</h3>
				  </div>
				  <div class="ui-body ui-body-a">
					<h2 id="summary"></h2>
				  </div>
				</div>

				<input type="button" value="Save Data">
			</form>
        </div><!-- /content -->
    </div><!-- /page -->
</body>
</html>
